# re模块的高级用法

## search

功能：按照需求，在整个字符串中查找，而不一定是从开头

需求：匹配出文章阅读的次数
```python
import re

ret = re.search(r"\d+", "阅读次数为 9999")
ret.group()

```

运行结果：

```python
'9999'
```

注意：

match是从头开始匹配，而search搜索是只要包含即可提取

## findall

功能：查询所有

需求：统计出python、c、c++相应文章阅读的次数
```python
import re

ret = re.findall(r"\d+", "python = 9999, c = 7890, c++ = 12345")
print(ret)

```

运行结果：

```python
['9999', '7890', '12345']
```

思考题：

如果有一个字符串是模拟的变量名，"MyName"，请问怎样改为"my_name"呢？

![image-20190318154008898](assets/image-20190318154008898.png)

## sub

功能：按照规则去查询字符串，并且将匹配到的数据进行替换

需求：将匹配到的阅读次数加1

方法1：
```python
import re

ret = re.sub(r"\d+", '998', "python = 997")
print(ret)

```

运行结果：

```python
python = 998
```

方法2：
```python
import re

info = "要想治疗腰间盘，请致电:13140000123,包您身心健健康康，腰好了Ta也就好了"

def replace_star(ret):
    """
    将获取的手机号中间4位改为*
    :return:
    """
    if ret:
        phone_num = ret.group()
        phone_num = phone_num[:3] + "*"*4 + phone_num[7:]
        return phone_num


ret = re.sub(r"\d{11}", replace_star, info)
print(ret)

```

运行结果：

```python
要想治疗腰间盘，请致电:131****0123,包您身心健健康康，腰好了Ta也就好了
```


### 练习

![](assets/Snip20161115_50.png)


从下面的字符串中取出文本

```html
<div>
        <p>岗位职责：</p>
<p>完成推荐算法、数据统计、接口、后台等服务器端相关工作</p>
<p><br></p>
<p>必备要求：</p>
<p>良好的自我驱动力和职业素养，工作积极主动、结果导向</p>
<p>&nbsp;<br></p>
<p>技术要求：</p>
<p>1、一年以上 Python 开发经验，掌握面向对象分析和设计，了解设计模式</p>
<p>2、掌握HTTP协议，熟悉MVC、MVVM等概念以及相关WEB开发框架</p>
<p>3、掌握关系数据库开发设计，掌握 SQL，熟练使用 MySQL/PostgreSQL 中的一种<br></p>
<p>4、掌握NoSQL、MQ，熟练使用对应技术解决方案</p>
<p>5、熟悉 Javascript/CSS/HTML5，JQuery、React、Vue.js</p>
<p>&nbsp;<br></p>
<p>加分项：</p>
<p>大数据，数理统计，机器学习，sklearn，高性能，大并发。</p>

        </div>
```

参考答案:

```python
re.sub(r"<[^>]*>|&nbsp;|\n", "", test_str)
```

## split

功能：根据匹配进行切割字符串，并返回一个列表

需求：切割字符串“info:xiaoZhang 33 shandong”
```python
import re

ret = re.split(r":| ","info:xiaoZhang 33 shandong")
print(ret)

```

运行结果：

```python
['info', 'xiaoZhang', '33', 'shandong']
```