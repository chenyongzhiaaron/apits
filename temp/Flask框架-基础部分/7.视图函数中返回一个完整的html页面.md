# 返回html页面数据

视图函数的作用主要是逻辑处理，但是还有一个功能，就是将url对应的页面数据返回给浏览器，这样浏览器才能看到一个完整的页面

## 1. 定义一个profile视图函数

```python
from flask import Flask

# 创建flask对象
app = Flask(__name__)

@app.route("/")
def index():
    """
    这个函数用来完成一个url对应的逻辑处理
    :return:
    """
    return "哈哈哈 ，我是第一个flask页面，成功的道理开始了..."

# -------- 下面的代码是新添加的 -------------
@app.route("/profile")
def profile():
    """
    返回html页面数据
    :return:
    """
    return "<h1>我是个人主页</h1>"

if __name__ == '__main__':
    app.run()

```



#### 效果

![image-20180812115807254](assets/image-20180812115807254.png)

## 2. 升级profile视图函数

通过上面的demo，大家明白了一个道理，即视图函数中，return返回的'字符串'，浏览器就会当做html代码进行渲染，利用这个特点，就可以把之前学习过的前端html的知识进行应用了，只要有一个完整的html代码，然后将其当做字符串用return返回，那么浏览器就可以看到了

是不是很爽

但问题来了

如果一个页面很复杂，假如说有100多行的html代码，难道真的在这个python文件中粘贴，然后用return返回么？？？

这样会难以升级以及维护，所以，此时可以单独定义一个html文件，在视图函数中用open打开就可以了，是不是很聪明

`main.py`

```python
from flask import Flask

# 创建flask对象
app = Flask(__name__)

@app.route("/")
def index():
    """
    这个函数用来完成一个url对应的逻辑处理
    :return:
    """
    return "哈哈哈 ，我是第一个flask页面，成功的道理开始了..."

@app.route("/profile")
def profile():
    """
    返回html页面数据
    :return:
    """
    # return "<h1>我是个人主页</h1>"
    with open("profile.html") as f:
        content = f.read()
    return content

if __name__ == '__main__':
    app.run()

```

`profile.html`

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>我是个人主页</h1>
</body>
</html>
```



#### 效果

![image-20180812120317440](assets/image-20180812120317440.png)

![image-20180812120521795](assets/image-20180812120521795.png)

## 3. 升级html页面的

现在明白了，只要`main.py`文件写好之后，它就会自动的读取`profile.html`文件中的数据，那么以后就可以很容易的进行同步开发了，让前端工程师编写`profile.html`文件，后端工程师只要编写`main.py`文件即可

这样的开发是不是很快啊

必须的

好了，假设前端人员编写好了如下的`profile.html`文件：

```html
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->  
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->  
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->  
<head>
<title>Home</title>
<!-- Meta -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">    
<link rel="shortcut icon" href="">  
<link href='https://fonts.googleapis.com/css?family=Roboto:400,500,400italic,300italic,300,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<!-- Global CSS -->
<link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">   
<!-- Plugins CSS -->
<link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.css">

<!-- Theme CSS -->  
<link id="theme-style" rel="stylesheet" href="assets/css/styles.css">

</head> 

<body>

<header class="header">
	
	<div class="intro">
		<div class="container text-center">
			<h1 class="name">James Doe</h1>
			<div class="title">Full Stack Developer</div>
			<div class="profile">
				<p>Profile info goes here. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet.</p>
			</div><!--//profile-->
		</div><!--//container-->
	</div><!--//intro-->
	
	<div class="contact-info">
		<div class="container text-center">
			<ul class="list-inline">
				<li class="email"><i class="fa fa-envelope"></i><a href="mailto:someone@example.com">james.doe@website.com</a></li>
				<li><i class="fa fa-phone"></i> <a href="tel: 0123456789">0123 456 7890</a></li>
				<li class="website"><i class="fa fa-globe"></i><a href="#" target="_blank">portfoliosite.com</a></li>
			</ul>
		</div><!--//container-->
	</div><!--//contact-info-->
	
	
</header><!--//header-->

<div class="wrapper container">
	<section id="contact-section" class="contact-section section">
		<h2 class="section-title">Get in Touch</h2>
		<div class="intro">
			<img class="profile-image" src="assets/images/profile-image.png" alt="">
			<div class="dialog">
				<p>I'm currently taking on freelance work. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus.</p>
				<p><strong>I can help with the following:</strong></p>
				<ul class="list-unstyled service-list">
					<li><i class="fa fa-check" aria-hidden="true"></i> App development with ReactJS</li>
					<li><i class="fa fa-check" aria-hidden="true"></i> Front-end development with AngularJS</li>
					<li><i class="fa fa-check" aria-hidden="true"></i> Back-end development with Django/Python</li>
					<li><i class="fa fa-check" aria-hidden="true"></i> UI development</li>
					<li><i class="fa fa-check" aria-hidden="true"></i> UX prototyping</li>
				</ul>
				<p>Drop me a line at <a href="mailto:someone@example.com">james.doe@website.com</a> or call me at <a href="tel:01234567890">0123 456 7890</a></p>
				<ul class="social list-inline">
					<li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-github-alt" aria-hidden="true"></i></a></li>
					<li><a href="#"><i class="fa fa-skype" aria-hidden="true"></i></a></li>
				</ul><!--//social-->
			</div><!--//diaplog-->
		</div><!--//intro-->

	</section><!--//section-->
	
</div><!--//wrapper-->

</body>
</html>
```

试试效果吧

![image-20180812120907833](assets/image-20180812120907833.png)

![image-20180812120928799](assets/image-20180812120928799.png)

## 4. 更改项目结构

上面的页面虽然好看些，但是感觉还是很low对不对，其原因就是因为只有html，并没有对应的css以及js

大家应该还记得一个完整的页面由3部分组成：

* html
* css
* js

那么css、js以及各种图片，改怎样传递给浏览器呢？

仔细看看下面的图中是否发现了一个没用过的路由呢！

![image-20180812110726137](assets/image-20180812110726137.png)

没错，就是那个`/static/<filename>`，当浏览器访问这个路径时，它就直接到`static`文件夹下找对应的文件

例如：

* 浏览器访问：`http://localhost:5000/static/main.css`
* flask就会提取`main.css`，然后到当前工程路径下找个文件，并且找到之后自动将其所有的内容返回
* 浏览器收到flask返回的css文件数据，就可以配合之前的html进行渲染了，即一个漂亮的页面就呈现出来了

![image-20180812121709648](assets/image-20180812121709648.png)

![image-20180812121901178](assets/image-20180812121901178.png)

![image-20180812122008498](assets/image-20180812122008498.png)

### 修改profile

![image-20180812122215116](assets/image-20180812122215116.png)

#### 重启服务器，查看效果

![image-20180812122428500](assets/image-20180812122428500.png)