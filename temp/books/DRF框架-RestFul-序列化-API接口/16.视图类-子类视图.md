# 子类视图

**本小节目标**：
* 熟悉子类视图的特点和基本使用

### 1. 子类视图简介

Django框架为了方便视图的编写，还提供了9个子类视图类。

> 注：子类视图一定同时继承了GenericAPIView和对应的Mixin扩展类，同时类中提供了对应的请求处理方法，并且请求处理方法中调用的就是Mixin扩展类中封装的通用方法。

| 子类视图类                   | 继承                                                         | 请求处理方法              |
| ---------------------------- | ------------------------------------------------------------ | ------------------------- |
| ListAPIView                  | GenericAPIView、ListModelMixin                               | 提供 get 方法             |
| CreateAPIView                | GenericAPIView、CreateModelMixin                             | 提供 post 方法            |
| RetrieveAPIView              | GenericAPIView、RetrieveModelMixin                           | 提供 get 方法             |
| UpdateAPIView                | GenericAPIView、UpdateModelMixin                             | 提供 put 方法             |
| DestroyAPIView               | GenericAPIView、DestroyModelMixin                            | 提供 delete 方法          |
| ListCreateAPIView            | GenericAPIView、ListModelMixin、CreateModelMixin             | 提供 get 和 post 方法     |
| RetrieveUpdateAPIView        | GenericAPIView、RetrieveModelMixin、UpdateModelMixin         | 提供 get、put 方法        |
| RetrieveDestroyAPIView       | GenericAPIView、RetrieveModelMixin、DestroyModelMixin        | 提供 get 和 delete 方法   |
| RetrieveUpdateDestroyAPIView | GenericAPIView、RetrieveModelMixin、UpdateModelMixin、DestroyModelMixin | 提供 get、put、delete方法 |
> 注：子类视图都在`from rest_framework.generics`模块中。

### 2. 子类视图改写RestAPI接口

使用子类视图进一步改写Mixin扩展类改写之后的RestAPI接口。

```python
# views.py
from rest_framework.generics import ListCreateAPIView, RetrieveUpdateDestroyAPIView

from booktest.serializers import BookInfoSerializer
from booktest.models import BookInfo

# /books/
class BookListView(ListCreateAPIView):
    """
    获取所有图书、增加图书
    """
    # 指定视图所使用的序列化器类
    serializer_class = BookInfoSerializer
    # 指定视图所使用的查询集
    queryset = BookInfo.objects.all()

# /books/(?P<pk>\d+)/
class BookDetailView(RetrieveUpdateDestroyAPIView):
    """
    获取、修改、删除指定图书
    """
    # 指定视图所使用的序列化器类
    serializer_class = BookInfoSerializer
    # 指定视图所使用的查询集
    queryset = BookInfo.objects.all()
```

**总结**：
* 子类视图类
  * 继承自GenericAPIView和对应的Mixin扩展类
  * 同时类中提供了对应的请求处理方法
