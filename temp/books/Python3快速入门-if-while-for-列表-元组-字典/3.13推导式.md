# 推导式



## 一、是什么

推导式：就是一种能够快速生成数据的方式

例如，想要快速生成由1~20内所有奇数数组成的列表，就可以用"推导式"，代码如下

```python
[x for x in range(1, 21) if x % 2 == 0]
```

运行结果如下:

```
[2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
```



## 二、分类

推导式，根据最终要生成的数据，简单划分为

* 列表推导式
* 集合推导式
* 字典推导式

注意：

没有元组推导式，而是生成器（在Python高级进阶课程中在学习）



## 三、列表推导式

列表推导式：一种可以快速生成列表的方式

### 1. 格式

```python
[变量 for 变量 in 可迭代对象]
```



### 2. 示例

#### demo1：基本使用

下图中展示的是快速生成列表的方式

![](https://cdn.itprojects.cn/04book/0002.book.img/2020-python38/t9wt2.png)



#### demo2：列表推导式中用到了`if`

注意：列表推导式如果`for`中用到了`if`，`for`不用写`:`

![](https://cdn.itprojects.cn/04book/0002.book.img/2020-python38/mr1o9.png)



#### demo3：2个`for`

注意：`for`在列表推导式中不写`:`

![](https://cdn.itprojects.cn/04book/0002.book.img/2020-python38/yjr3c.png)



#### demo4：3个`for`

![](https://cdn.itprojects.cn/04book/0002.book.img/2020-python38/mr7ig.png)



### 3. 练习

请写出一段 Python 代码实现分组一个 list 里面的元素,比如` [1,2,3,...100]`变成` [[1,2,3],[4,5,6]....]`

参考答案：

```python
a = [x for x in range(1,101)]
b = [a[x:x+3] for x in range(0,len(a),3)]
```





## 四、集合推导式

集合推导式：一种快速生成集合的方式

示例：

```python
In [5]: a = {x for x in range(1, 21) if x % 2 == 0}

In [6]: type(a)
Out[6]: set

In [7]: a
Out[7]: {2, 4, 6, 8, 10, 12, 14, 16, 18, 20}
```

集合推导式中也可以用`if`等，与列表推导式在格式上很类似，这里就不做过多的介绍，请类别列表推导式进行学习



## 五、字典推导式

字典推导式：一种快速生成字典的方式



示例1:

快速生成一个1~10内key为某个数此时value为平方的字典

```python
{x:x**2 for x in range(1, 11)}
```

运行效果：

```python
{1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81, 10: 100}
```



示例2：

快速生成一个1~10内key可以1时value为2，key为2时value3....依次类推的字典

```python
{x:(x+1) for x in range(1,11)}
```

运行效果：

```python
{1: 2, 2: 3, 3: 4, 4: 5, 5: 6, 6: 7, 7: 8, 8: 9, 9: 10, 10: 11}
```



## 六、练习

编写代码用推导式，实现如下效果（列表中嵌套字典）

```
[{1: 1},
 {2: 4},
 {3: 9},
 {4: 16},
 {5: 25},
 {6: 36},
 {7: 49},
 {8: 64},
 {9: 81},
 {10: 100}]
```

参考代码

```python
[{x:x**2} for x in range(1, 11)]
```

