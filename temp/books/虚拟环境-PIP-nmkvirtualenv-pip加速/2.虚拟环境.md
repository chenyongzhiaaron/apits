# 虚拟环境

## 1. 目的

#### 问题：

在开发过程中如果想要安装Python模块可以使用`sudo pip install 模块`来安装

如果当前有2个项目，项目A用到了某个版本的某个模块，假如说`pygame`用的是旧版本，现在项目要用到`pygame`的新版本，此时就会出现一个很尴尬的问题，如果让项目A执行则用旧版pygame，如果让项目B运行则用新版pygame，因为在同一个电脑只有1份，即不能同时存在新旧2个版本的pygame，所以要使用pip工具一会安装旧版本一会安装已新版本会相当的麻烦，且不友好

#### 解决方法：

虚拟环境



## 2. 什么是虚拟环境

虚拟环境可以搭建独立的Python运行环境，使单个项目运行环境和其他项目运行环境互不影响。

说的直白点，安卓手机上的应用分身，虽然在同一个手机上，但是可以有2个微信同时登录

其实虚拟环境就很类似刚刚所描述应用分身，就是在同一个电脑上，有多个不同的Python解释器以及对应的模块工具，所以只要有了多个虚拟环境，那么在多个项目开发时，就可以选择需要的虚拟环境然后这这个虚拟环境中安装需要的版本，就实现了在同一个电脑上同时开发多个项目的能力

## 3. 特点

虚拟环境是python解释器的一个私有副本，在这个环境中你可以安装私有包，而且不会影响系统中安装的全局python解释器

虚拟环境非常有用，可以在系统的python解释器中避免包的混乱和版本的冲突。为每个程序单独创建虚拟环境可以保证程序智能访问虚拟环境中的包，从而保持全局解释器的干净整洁，时期只作为创建（更多）虚拟环境的源。

使用虚拟环境还有个好处，那就是不需要管理员权限。即安装是不需要`sudo`



## 4. 安装工具以便使用虚拟环境



未能能够让大家清晰的知道，虚拟环境工具的使用，所以会讲解2个工具

* `virtualenv`较为麻烦
* `virtualenvwrapper`使用时简单



### 4.1. 先确定自己电脑上是否已经安装了python以及pip

如要求Python2、Python3两个版本同时存在，只要有1个即可

![](assets/Xnip2018-08-03_10-40-24.png)

### 4.2 虚拟环境工具(virtualenv)

#### 4.2.1. 安装

```shell
sudo pip install virtualenv
```

#### 4.2.2. 测试

```shell
# 建立文件夹
$ mkdir testvirtualenv

# 进入文件夹
$ cd testvirtualenv

# 创建虚拟环境
$ virtualenv 名字

```

#### 4.2.3. 终端使用虚拟环境

![image-20190508180058403](assets/image-20190508180058403.png)

![image-20190508180435096](assets/image-20190508180435096.png)

![image-20190508181615014](assets/image-20190508181615014.png) 

#### 4.2.4. pycharm使用虚拟环境

![image-20190508181816720](assets/image-20190508181816720.png)

![image-20190508181856212](assets/image-20190508181856212.png)

![image-20190508181914656](assets/image-20190508181914656.png)

![image-20190508182002200](assets/image-20190508182002200.png)

![image-20190508182043024](assets/image-20190508182043024.png)

![image-20190508182102829](assets/image-20190508182102829.png)

![image-20190508182159886](assets/image-20190508182159886.png)

![image-20190508182252846](assets/image-20190508182252846.png)



说明：

> 上面创建虚拟环境的后，在pycharm的项目设置中选择使用的解释器为上面创建的虚拟环境中的Python3，即可在运行pycharm时，使用虚拟环境中的解释器以及环境来执行Python文件

![](assets/Xnip2018-08-03_09-27-43.png)

### 4.3 虚拟环境工具(virtualenvwrapper)

为了更方便的操作虚拟环境，像创建、删除、切换等，所以使用`virtualenvwrapper`

`virtualenvwrapper`是`virtualenv`的扩展包，可以更方便的新增、删除、复制、切换虚拟环境



#### 4.3.1 安装

```shell
sudo pip install virtualenvwrapper
```

![](assets/Xnip2018-08-03_09-28-43.png)

#### 4.3.2 修改

安装完`virtualenvwrapper`使用`virtualenvwrapper.sh`需要配置一下环境变量直接把下面两行写入`~/.bash_profile`文件中即可：

```shell
export WORKON_HOME='~/workspace'  # 这个目录为创建虚拟环境是所在的目录，可以自己指定目录
source /usr/local/bin/virtualenvwrapper.sh # 如果不知道路径，可以find / -name virtualenvwrapper.sh
```

在配置完环境变量以后执行一下命令，不然不生效

```shell
source ~/.bash_profile
```

![](assets/Xnip2018-08-03_09-29-39.png)

#### 4.3.3 测试

![image-20180811171001953](assets/image-20180811171001953.png)

![image-20180811171106144](assets/image-20180811171106144.png)

![image-20180811171331255](assets/image-20180811171331255.png)

![image-20180811171423368](assets/image-20180811171423368.png)

![image-20180811171545142](assets/image-20180811171545142.png)

![image-20180811171628323](assets/image-20180811171628323.png)
