# Compose 简介

## 1. 引入

通过前面的知识，我们知道使用一个 `Dockerfile` 模板文件，可以让用户很方便的定义一个单独的应用容器，从而得到一个镜像。然而，在日常工作中，经常会碰到需要多个容器相互配合来完成某项任务的情况。例如要实现一个 Web 项目，除了 Web 服务容器本身，往往还需要再加上后端的数据库服务容器，甚至还包括负载均衡容器等。

使用流程：

1. 创建 `docker-compose.yml` 配置文件（yaml语法）
2. 使用 `docker-compose` 来指令管理这个集群



## 2. 介绍

`Compose` 项目是 Docker 官方的开源项目，负责实现对 Docker 容器集群的`快速编排`

其代码目前在 https://github.com/docker/compose 上开源

Compose定位是 「定义和运行多个 Docker 容器的应用（Defining and running multi-container Docker applications）」

Compose恰好满足了这样的需求,它允许用户通过一个单独的 `docker-compose.yml` 模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）

Compose中有两个重要的概念：

- 服务 (`service`)：一个应用的容器。
- 项目 (`project`)：由一组关联的应用容器组成的一个完整业务单元，在 `docker-compose.yml` 文件中定义。

Compose的默认管理对象是项目，通过子命令对项目中的一组容器进行便捷地生命周期管理。

Compose项目由 Python 编写，实现上调用了 Docker 服务提供的 API 来对容器进行管理。因此，只要所操作的平台支持 Docker API，就可以在其上利用 Compose来进行编排管理



## 3. 安装

Compose 支持 Linux、macOS、Windows 10 三大平台。

Compose 可以通过 Python 的包管理工具 `pip` 进行安装，也可以直接下载编译好的二进制文件使用，甚至能够直接在 Docker 容器中运行

Docker Desktop for Mac/Windows自带docker-compose可以直接使用

```bash
$ docker-compose --version

docker-compose version 1.27.4, build 40524192
```

### 其他系统下安装Compose

访问：https://github.com/docker/compose

![image-20191126083517102](assets/image-20191126083517102.png)

![image-20191126083648299](assets/image-20191126083648299.png)