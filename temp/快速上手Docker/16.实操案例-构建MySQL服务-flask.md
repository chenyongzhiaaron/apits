# 构建MySQL服务



## 1. 备份

将之前的`docker-compose.yml`进行备份

<img src="assets/image-20201215204418446.png" alt="image-20201215204418446" style="zoom:50%;" />



## 2. 修改

然后修改`docker-compose.yml`内容如下：

```yaml
version: '3'
services:
    mysql:
        image: mysql:5.7
        expose:
            - 3306
        ports:
            - "3307:3306"
        environment:
            MYSQL_ROOT_PASSWORD: python
            MYSQL_USER: root
        volumes:
            - ./02_mysql:/var/lib/mysql
```



## 3. 构建

执行命令，运行服务

```
docker-compose up
```

<img src="assets/image-20201215204802617.png" alt="image-20201215204802617" style="zoom:50%;" />



## 4. 测试

测试MySQL服务

![image-20191125210857644](assets/image-20191125210857644.png)



## 5. 说明

我们之所以在`docker-compose.yml`文件中设置`volumes`是为了保证，将来操作的数据可以直接存储到宿主机，而不会因为容器的删除，导致数据丢失

