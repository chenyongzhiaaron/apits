# 分页Pagination

**本小节目标**：
* 掌握DRF框架的全局分页设置
* 掌握DRF框架指定视图关闭分页设置
* 掌握DRF框架自定义分页类及使用

## 分页

REST framework提供了分页的支持。

### 1. 全局分页设置

可以在配置文件中设置全局分页类，如：

```python
REST_FRAMEWORK = {
    'DEFAULT_PAGINATION_CLASS':  '<全局分页类>',
    'PAGE_SIZE': '<页容量>'
}
```

可选分页类如下：

1） **PageNumberPagination**

前端访问网址形式：

```http
GET  http://api.example.org/books/?page=4
```

2）**LimitOffsetPagination**

前端访问网址形式：

```http
GET http://api.example.org/books/?offset=10&limit=40
```

如:
```python
REST_FRAMEWORK = {
    'DEFAULT_PAGINATION_CLASS':  'rest_framework.pagination.PageNumberPagination',
    'PAGE_SIZE': 5  # 页容量
}
```

### 2. 指定视图关闭分页

设置了全局分页之后，如果某列表视图需要关闭分页，只需在视图中指定：

```python
# 关闭分页
pagination_class = None
```

### 3. 自定义分页类

可以自定义分页类，在视图中通过`pagination_class`属性指定视图使用的分页类。

1）自定义分页类
```python
class StandardResultPagination(PageNumberPagination):
    # 指定分页的默认页容量
    page_size = 3
    # 指定获取分页数据时，指定页容量参数的名称
    page_size_query_param = 'page_size'
    # 指定分页时的最大页容量
    max_page_size = 5
```

2）指定视图所使用的分页类
```python
class BookListView(ListAPIView):
    queryset = BookInfo.objects.all()
    serializer_class = BookInfoSerializer
    # 指定当前视图所使用的分页类
    pagination_class = StandardResultPagination
```
3）通过`http://api.example.org/books/?page=<页码>&page_size=<页容量>` 进行访问

**总结**：
* 全局分页设置：在settings.py文件中通过`DEFAULT_PAGINATION_CLASS`指定全局分页类
* 关闭分页：pagination_class = None
* 自定义分页类：继承PageNumberPagination并添加相应的类属性
